const images=[{src:"img01.webp",caption:"Group class at Nugegoda"},{src:"img01.webp",caption:"Literature discussion"},{src:"img01.webp",caption:"Online session"}];let currentImageIndex=0,imageInterval=null,tabAutoInterval=null,galleryActive=!1;const carouselImg=document.getElementById("carouselImage"),dotsContainer=document.getElementById("carouselDots"),tabs=document.querySelectorAll(".tab-btn"),panels=document.querySelectorAll(".tab-panel"),modal=document.getElementById("imageModal"),modalImg=document.getElementById("modalImage"),closeModal=document.querySelector(".modal-close");function initDots(){dotsContainer.innerHTML="",images.forEach(((e,t)=>{const a=document.createElement("span");a.classList.add("dot"),t===currentImageIndex&&a.classList.add("active"),a.addEventListener("click",(e=>{e.stopPropagation(),setImageIndex(t)})),dotsContainer.appendChild(a)}))}function setImageIndex(e){currentImageIndex=e,carouselImg.src=images[e].src,carouselImg.alt=images[e].caption,document.querySelectorAll(".dot").forEach(((t,a)=>{t.classList.toggle("active",a===e)}))}function nextImage(){const e=(currentImageIndex+1)%images.length;setImageIndex(e),0===e&&galleryActive&&setTimeout((()=>{galleryActive&&activateTab(0)}),500)}function startImageRotation(){imageInterval&&clearInterval(imageInterval),galleryActive&&(imageInterval=setInterval(nextImage,4e3))}function stopImageRotation(){imageInterval&&(clearInterval(imageInterval),imageInterval=null)}function activateTab(e){tabs.forEach(((t,a)=>t.classList.toggle("active",a===e))),panels.forEach(((t,a)=>t.classList.toggle("active",a===e))),galleryActive=1===e,galleryActive?startImageRotation():(stopImageRotation(),currentImageIndex=0,setImageIndex(0))}function nextTab(){const e=(currentTabIndex+1)%tabs.length;activateTab(e),currentTabIndex=e}function startTabAutoRotate(){tabAutoInterval&&clearInterval(tabAutoInterval),tabAutoInterval=setInterval(nextTab,6e3)}let currentTabIndex=0;const carouselBlock=document.querySelector(".carousel-block");if(carouselBlock){const e=new IntersectionObserver((t=>{t.forEach((t=>{t.isIntersecting&&(startTabAutoRotate(),e.disconnect())}))}),{threshold:.3});e.observe(carouselBlock)}function openModal(e){modalImg.src=e,modal.style.display="flex",document.body.style.overflow="hidden"}tabs.forEach(((e,t)=>{e.addEventListener("click",(()=>{clearInterval(tabAutoInterval),activateTab(t),currentTabIndex=t,setTimeout((()=>{startTabAutoRotate()}),5e3)}))})),initDots(),setImageIndex(0),closeModal.addEventListener("click",(()=>{modal.style.display="none",modalImg.src="",document.body.style.overflow="auto"})),window.addEventListener("click",(e=>{e.target===modal&&(modal.style.display="none",modalImg.src="",document.body.style.overflow="auto")}));const bubble=document.getElementById("chatBubble"),typeSpan=document.getElementById("typewriterSpan"),msg="Enroll now...";let i=0,deleting=!1;function typewriter(){if(!deleting&&i<=13){if(typeSpan.textContent=msg.substring(0,i),i++,i>13)return deleting=!0,void setTimeout(typewriter,2e3)}else if(deleting&&i>=0&&(typeSpan.textContent=msg.substring(0,i),i--,i<0))return deleting=!1,i=0,void setTimeout(typewriter,400);setTimeout(typewriter,deleting?70:120)}setTimeout((()=>{bubble.classList.add("visible"),setTimeout(typewriter,400)}),800),document.querySelectorAll("img").forEach((e=>{e.addEventListener("error",(function(){this.dataset.fallback||!this.src||this.src.includes("placeholder")||(this.dataset.fallback="true",this.src="https://via.placeholder.com/400/9f7aea/ffffff?text=AKH")}))})),carouselImg.addEventListener("click",(()=>openModal(carouselImg.src)));
